<?php

/*************************************************************************************/
/****************************** REGISTER CONTROLLERS *********************************/
/*************************************************************************************/

	Controller::execute("test")->on("GET")->matching("/test/<a>");

/*************************************************************************************/
/******************************** DEFINE WRAPPERS ************************************/
/*************************************************************************************/
	
	$layout = Wrapper::create(function(Resource $resource) {
		View::page('site');
		return View::page()->set('content', $resource->content())->render();
	}); 

/*************************************************************************************/
/******************************** WRAP CONTROLLERS ***********************************/
/*************************************************************************************/
	
	Controller::find("**")->wrap($layout);

/*************************************************************************************/
/***************************** DISPATCH CLIENT REQUEST *******************************/
/*************************************************************************************/
	
	try {
        echo Controller::dispatch();
	}
	catch (Exception $e) {
		throw $e; // Do something more interesting here .
	}